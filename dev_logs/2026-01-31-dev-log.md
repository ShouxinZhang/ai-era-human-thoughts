# 开发日志 - 2026-01-31

## 概要
在页面底部新增“反馈”入口，用户可直接在网页提交反馈并写入反馈数据库（本地 SQLite / 线上 Supabase），不依赖邮件客户端。

## 业务目的
- 提升反馈转化：降低用户提出建议的成本，缩短从“发现问题”到“可行动信息”的链路。
- 更快迭代：把真实用户在物理世界与日常生活中的问题更快汇聚到维护者。

## 变更清单（涉及文件）
- apps/web/src/components/FeedbackButton.tsx
  - 新增绿色“反馈”按钮与弹窗。
  - 调用 `/api/feedback` 提交反馈，由服务器写入反馈数据库。

- apps/web/src/app/api/feedback/route.ts
  - 新增反馈 API：接收 message/contact/pageUrl，并记录 user-agent/ip/referer 等信息。
  - 根据 `NEXT_PUBLIC_DATA_SOURCE` 写入本地 SQLite 或 Supabase 的 `feedback` 表。


- apps/web/scripts/local-init.mjs
  - 本地数据库新增 `feedback` 表（首次运行或缺表时自动创建）。

- apps/web/src/app/page.tsx
  - 在 footer 区域加入反馈按钮。

## 验证
- 页面底部可见“反馈”按钮。
- 填写内容后点击“发送”，能成功写入反馈表（本地 SQLite）。

## 备注
- 线上 Supabase 需要创建 `feedback` 表并配置插入策略（见 core/schema/001_initial_schema.sql）。
